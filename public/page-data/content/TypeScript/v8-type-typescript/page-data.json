{"componentChunkName":"component---src-templates-blog-post-js","path":"/content/TypeScript/v8-type-typescript/","result":{"data":{"site":{"siteMetadata":{"title":"Kim Blog","author":"Kim"}},"markdownRemark":{"id":"c6c0ca39-035b-5511-8a27-20ff84c3eedc","excerpt":"TypeScript 据目前来看基本上是前端开发者的标配，我们可能仅仅知道 TypeScirpt 解决了 JavaScript 在类型上的苦恼，但是对于带给我们更多的底层优化可能熟知甚少，接下来我们就从 V8 内部对类型的优化上来探讨一下为什么要使用 TypeScript 吧。 V8 引擎解析过程 JavaScript…","html":"<p>TypeScript 据目前来看基本上是前端开发者的标配，我们可能仅仅知道 TypeScirpt 解决了 JavaScript 在类型上的苦恼，但是对于带给我们更多的底层优化可能熟知甚少，接下来我们就从 V8 内部对类型的优化上来探讨一下为什么要使用 TypeScript 吧。</p>\n<h3>V8 引擎解析过程</h3>\n<p>JavaScript 语言是解释性语言还是编译性语言其实说法都不固定。从内部机制上看，其实 V8 对 JavaScript 是存在编译过程的，反而在<code class=\"language-text\">你不知道的js(上)中</code>有解释到它的编译过程比传统的编译性语言更复杂；从执行的角度上说，首先 JavaScript 需要由引擎才能运行起来，无论是浏览器还是在 Node 中，这是解释性语言的特性。但是在 V8 引擎下，又引入了 TurboFan 编译器，他会在特定的情况下进行优化，把代码编译成执行效率更高的<code class=\"language-text\">Machine Code</code>，也就是机器码。当然这个编译器并不是 JavaScript 编译过程必须要经过的一个步骤，只是为了提高代码的执行效率。</p>\n<p>先来一张图</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABz0lEQVQoz31Ty67TMBDt/7Hla5DYwo5PAIl/gA3SFRsWd315bEobmpeTOInt+BHbccJJ05u2kWDkvOw5M3POTHbTv81a1/e9dc5ab0yPnRAC7uM4Li+7/4A7KUlRRFEUx0nTtMumD9MQLg5X8DAMUiqkQhKpVBzHOSFlVRFC8jynlMLn4cvnVx+j1x+eHr893IGdc1rruq6VkrCyrFCbUhqFI5zWBj7ff/x88eb48u2vP8ffG7AXnexQq1RwzbKsKErAGGPLFqjC7d0n9v5rd2Z+zzmcDfUvL0iOQvb7PQJxIRYwqrPWbjlvrGmaqqqQtsXFgBXLPiKE8V4w5EHIWa2zYNExamizBkJOezEHh6VPV7D3Q920UDhJEiE6Qknt6lKXla6IJszwTnRpmp1Phfd+A/Yt40mSorFQR1olndReG2+E45WkslNoWJKmYLEFL2LMDNt2/dwYpTXW7elunRBtDOcC2oAVPm9hkB9sRYfau97a9fRaNuccCgvOpdaOscmYdQAGpYqyPBwOp9Mpz8m17EX3GSwEFqJLYxyGMU2nPJ+ybCJkECKbh3Se1uwWrJVllA4+zH1wHguPCyu05Pk3GmYLaEoIIwYOYwPZ/wI5KV9YqZluKAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/dd75f71f3c68f96913caa6dd2fae2801/799d3/1.png\"\n        srcset=\"/static/dd75f71f3c68f96913caa6dd2fae2801/00d96/1.png 148w,\n/static/dd75f71f3c68f96913caa6dd2fae2801/0b23c/1.png 295w,\n/static/dd75f71f3c68f96913caa6dd2fae2801/799d3/1.png 590w,\n/static/dd75f71f3c68f96913caa6dd2fae2801/11d19/1.png 800w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n首先 V8 引擎会将 JavaScript 代码解析成 AST（抽象语法树），这个过程是相当慢的，代码越多解析过程的时间耗费就越长。AST 解析结果可以通过<a href=\"https://astexplorer.net/\">AST</a>来体验一番。</p>\n<p>来看下面代码</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token number\">123</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fun</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>经过 AST 解析</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Program\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">54</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"body\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"VariableDeclaration\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"declarations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"VariableDeclarator\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a\"</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"init\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Literal\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"raw\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"123\"</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"const\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"VariableDeclaration\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"declarations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"VariableDeclarator\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fun\"</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"init\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ArrowFunctionExpression\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"expression\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"generator\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"async\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"body\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"BlockStatement\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">33</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"body\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ExpressionStatement\"</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">36</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">51</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token property\">\"expression\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CallExpression\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">36</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"callee\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MemberExpression\"</span><span class=\"token punctuation\">,</span>\n                      <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">36</span><span class=\"token punctuation\">,</span>\n                      <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">47</span><span class=\"token punctuation\">,</span>\n                      <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">36</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">43</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"console\"</span>\n                      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                      <span class=\"token property\">\"property\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">44</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">47</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"log\"</span>\n                      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                      <span class=\"token property\">\"computed\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"arguments\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                      <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Identifier\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">48</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">49</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a\"</span>\n                      <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">]</span>\n                  <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n              <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"const\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sourceType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"module\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>经过 AST 解析之后，Ignition 负责将 AST 转换成 Bytecode(字节码),TurboFan 负责编译出优化后的 Machine Code，并且 Machine Code 在执行效率上优于 Bytecode。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a922502e459070a2a5e97afe131acd4e/11d19/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAPoAAAD6AG1e1JrAAABDUlEQVQY041RuW6DUBDk/7/FBVCBIiEkCtOAuAzhEAKJQxzhEgFsIMmYZzdO4yke+3Z3ZvYt1O/buF6v8zwvy7LvO8lQ5PPzD+u6btuGAFUQ2rZN0zSO46IooEL41Is86UatruthGMg1z3NFUUzTVFXVsqwoijDCgwzhcRynaeq6DnGSJJ7nwWc4gL4gCDiO+zggCIIoin3fP8hZlkEvDEMQYChJEsuyOGVZPp/PmqbB83Q6MQxD0zTP8xCqqupOhrDjOLquXy4XwzA+D4AAOeRt23ZdF7qoOgd830cGfncyBoMM9oEAM5N9YiXLE8jgRfMTTdOguSxLxFT91ZdFPk3ft9v6zg8jC8LOYPkH8Km7HyiKLCoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/a922502e459070a2a5e97afe131acd4e/799d3/2.png\"\n        srcset=\"/static/a922502e459070a2a5e97afe131acd4e/00d96/2.png 148w,\n/static/a922502e459070a2a5e97afe131acd4e/0b23c/2.png 295w,\n/static/a922502e459070a2a5e97afe131acd4e/799d3/2.png 590w,\n/static/a922502e459070a2a5e97afe131acd4e/11d19/2.png 800w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>最后就可以执行了。</p>\n<h3>什么情况下会经过 TurboFan 编译成 Machine Code</h3>\n<p>在整过解析流程中，会在特定的条件下通过 TruboFan 编译成 Machine Code，那么这个特定条件是什么呢？</p>\n<p>JavaScript 语言是一门动态的语言，动态性是指在 JavaScript 语言中变量是不存在类型可言的，类型是值的内部特征，而变量只是承载值的载体，因此一个变量可以承载任意变量的值。</p>\n<p>由于动态性，JavaScript 在内部执行的时候，存在着一大堆的规则。比如说简单的加法运算规则就存在好几种：数字相加、字符串相加、对象和字符串相加等等，其内部隐式类型转换的复杂程度就更不要说了。这样的情况也就在很大程度上在内部增加了复杂的判断逻辑，从而降低代码性能。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> x\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>对于上面代码来说，如果函数被多次调用并且一直传入<code class=\"language-text\">number</code>类型，那么 V8 就会将这段代码编译成 Machine Code，因为固定了类型，内部不需要做太多的判断逻辑了。</p>\n<p>但是如果一旦我们传入的参数类型改变，那么 Machine Code 就会被 DeOptimized 为 Bytecode，会造成性能损耗。因此如果我们希望代码都能被编译成 Machine Code，那么就应该在写代码的时候保持类型一致。</p>\n<h3>TypeScript 带来的小美好</h3>\n<p>由于 JavaScript 动态类型不固定的缺陷，导致我们很难去享受 Machine Code 带来执行上的快感，TypeScript 的出现为开发者带来了福音。</p>\n<p>TypeScript 在我们编写代码的时候就约束类型。</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> num<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">123</span></code></pre></div>\n<p>上面代码此时就是<code class=\"language-text\">number</code>类型，如果我们对 num 赋值一个 string，在编译器上就会抛出错误，能够做到很好的提醒我们。</p>\n<p>不仅如此，除了以上 Ts 对 type 上面带给我们的福音之外，更多的是它能带给 JavaScript 一种强类型语言的能力，可以让我们去写 Interface、泛型等等，可能更好的基于 SOLID 的设计原则去组织代码架构。</p>","frontmatter":{"title":"从V8对类型的优化上谈为什么要使用TypeScript","date":"September 14, 2019","description":"从V8内部对JavaScript代码的解析过程中来探讨一下为什么要使用TypeScript","category":"TypeScript"}}},"pageContext":{"slug":"/content/TypeScript/v8-type-typescript/","previous":{"fields":{"slug":"/content/React/reactdom-render/"},"frontmatter":{"title":"深入探究ReactDom.render方法执行过程"}},"next":{"fields":{"slug":"/content/JavaScript/javascript-execution-context/"},"frontmatter":{"title":"深入了解JavaScript执行上下文"}}}}}