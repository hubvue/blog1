{"componentChunkName":"component---src-templates-blog-post-js","path":"/content/Vue/vue-use/","result":{"data":{"site":{"siteMetadata":{"title":"Kim Blog","author":"Kim"}},"markdownRemark":{"id":"4c9007a9-d74c-5e1a-a630-6be6f796694d","excerpt":"å‰è¨€ ç°åœ¨çš„å·¥ä½œä½¿ç”¨ Vue æ¯”è¾ƒé¢‘ç¹ï¼Œäºæ˜¯å°±æƒ³äº†è§£ä¸€ä¸‹ Vue åŸç†ä¸Šçš„ä¸œè¥¿ï¼Œå°±å…ˆæ‹¿ Vue çš„æ’ä»¶æœºåˆ¶å¼€åˆ€å§ã€‚ Vue çš„æ’ä»¶æœºåˆ¶å°±æ˜¯ä¸€ä¸ª APIï¼Œå³ã€‚ å½“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Vuex çš„æ—¶å€™ï¼Œè‚¯å®šä¼šå†™è¿™æ ·ä¸€æ®µä»£ç ã€‚ æ²¡æœ‰çœ‹è¿‡åŸç†ä¹‹å‰ä¸€ç›´éƒ½è§‰å¾—è¿™ä¸ª API å¥½å¼ºå¤§ï¼Œå°± use äº†ä¸€ä¸‹ï¼Œå°±å¯ä»¥åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ Vuexâ€¦","html":"<h3>å‰è¨€</h3>\n<p>ç°åœ¨çš„å·¥ä½œä½¿ç”¨ Vue æ¯”è¾ƒé¢‘ç¹ï¼Œäºæ˜¯å°±æƒ³äº†è§£ä¸€ä¸‹ Vue åŸç†ä¸Šçš„ä¸œè¥¿ï¼Œå°±å…ˆæ‹¿ Vue çš„æ’ä»¶æœºåˆ¶å¼€åˆ€å§ã€‚</p>\n<p>Vue çš„æ’ä»¶æœºåˆ¶å°±æ˜¯ä¸€ä¸ª APIï¼Œå³<code class=\"language-text\">Vue.use()</code>ã€‚</p>\n<p>å½“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Vuex çš„æ—¶å€™ï¼Œè‚¯å®šä¼šå†™è¿™æ ·ä¸€æ®µä»£ç ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Vuex <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>Vuex<span class=\"token punctuation\">)</span></code></pre></div>\n<p>æ²¡æœ‰çœ‹è¿‡åŸç†ä¹‹å‰ä¸€ç›´éƒ½è§‰å¾—<code class=\"language-text\">Vue.use</code>è¿™ä¸ª API å¥½å¼ºå¤§ï¼Œå°± use äº†ä¸€ä¸‹ï¼Œå°±å¯ä»¥åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ Vuexã€‚ç°åœ¨çœ‹äº†ä¸€ä¸‹æºç ï¼Œä¹Ÿä¸è¿‡å°”å°”ã€‚</p>\n<h3>Vue.use</h3>\n<p><code class=\"language-text\">Vue.use</code>æ–¹æ³•åœ¨ Vue æºç çš„<code class=\"language-text\">src/core/global-api/use.js</code>ä¸­ï¼Œæ‰“å¼€æºç æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä¸€<code class=\"language-text\">å°</code>æ®µ<code class=\"language-text\">Vue.use</code>çš„ä»£ç ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Vue<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">use</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">plugin<span class=\"token punctuation\">:</span> Function <span class=\"token operator\">|</span> Object</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> installedPlugins <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_installedPlugins <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_installedPlugins <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>installedPlugins<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>plugin<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> args <span class=\"token operator\">=</span> <span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  args<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> plugin<span class=\"token punctuation\">.</span>install <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    plugin<span class=\"token punctuation\">.</span><span class=\"token function\">install</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>plugin<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> plugin <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">plugin</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  installedPlugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>plugin<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æ•´æ®µä»£ç ä¸è¶…è¿‡ 20 è¡Œï¼ŒğŸ˜®Vue.use æ–¹æ³•ä¹Ÿå¤ªå¼ºäº†ï¼Œ20 è¡Œä¸åˆ°å°±å†™äº†ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿã€‚ä»”ç»†çœ‹äº†æ‰æ˜ç™½ï¼ŒVue è¿™è€å¤§å“¥å®šäº†ä¸€ä¸ªè§„çŸ©ï¼Œè¿™ä¸ªè§„çŸ©å°±æ˜¯ï¼š</p>\n<blockquote>\n<p>Vue è€å¤§å“¥è¯´ï¼šä½ ä»¬è¿™äº›æ’ä»¶èº«ä¸Šå¿…é¡»æœ‰ä¸€ä¸ª install æ–¹æ³•æˆ–è€…ä½ ä»¬æœ¬èº«æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åæˆ‘æŠŠæˆ‘è‡ªå·±ç»™ä½ ä»¬ï¼Œä½ ä»¬æƒ³å¹²å•¥å¹²å•¥ ğŸ˜</p>\n</blockquote>\n<p>å°±åŸºæœ¬ä¸Šå°±æ˜¯<code class=\"language-text\">Vue.use</code>çš„ä½œç”¨äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æºç åšäº†ä»€ä¹ˆã€‚</p>\n<p>é¦–å…ˆå¯¹äºæ¥æ³¨å†Œçš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œåªèƒ½æ³¨å†Œä¸€æ¬¡ï¼Œä¸å¯ä»¥é‡å¤æ³¨å†Œï¼Œä»ä¸‹é¢ä»£ç ä¸­å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> installedPlugins <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_installedPlugins <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_installedPlugins <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>installedPlugins<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>plugin<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//.........code</span>\n\ninstalledPlugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>plugin<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Vue ä¸­ç»´æŠ¤äº†ä¸€ä¸ªæ’ä»¶æ± <code class=\"language-text\">_installedPlugins</code>ï¼Œå…ˆåˆ¤æ–­å½“å‰æ³¨å†Œçš„æ’ä»¶åœ¨æ’ä»¶æ± ä¸­æ˜¯å¦å­˜åœ¨ï¼šå¦‚æœå­˜åœ¨ç›´æ¥æ”¾å¼ƒæœ¬åœ°æ³¨å†Œï¼›å¦‚æœä¸å­˜åœ¨æ‰§è¡Œé€»è¾‘ï¼Œæœ€åæŠŠè¿™ä¸ªæ’ä»¶æ”¾å…¥åˆ°æ’ä»¶æ± ä¸­ã€‚</p>\n<p>ç„¶åè·å–åˆ°<code class=\"language-text\">Vue.use</code>æ–¹æ³•çš„ argumentsï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ arguments æ˜¯ä¸€ä¸ªç±»æ•°ç»„ï¼Œå°†å®ƒè½¬æ¢æˆæ•°æ®ï¼Œå°† Vue æ”¾åœ¨æ•°ç»„çš„æœ€å‰é¢ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> args <span class=\"token operator\">=</span> <span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nargs<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ç”±äºæœ¬æ¬¡è°ƒç”¨æ—¶<code class=\"language-text\">Vue.use</code>ï¼Œé‚£ä¹ˆ use å‡½æ•°ä¸­çš„ this å°±æ˜¯æŒ‡å‘çš„ Vueã€‚</p>\n<p>æœ€åå°±æ˜¯æ³¨å†Œäº†</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> plugin<span class=\"token punctuation\">.</span>install <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  plugin<span class=\"token punctuation\">.</span><span class=\"token function\">install</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>plugin<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> plugin <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">plugin</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>åˆ¤æ–­å¦‚æœæ’ä»¶ä¸Šæœ‰ install æ–¹æ³•ï¼Œé‚£ä¹ˆå°±é€šè¿‡ apply æ‰§è¡Œï¼Œå¹¶ä¸”æŠŠ args ä¼ è¿›å»ï¼›å¦‚æœæ²¡æœ‰å°±åˆ¤æ–­æ’ä»¶æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå°±é€šè¿‡ apply æ‰§è¡Œã€‚</p>\n<h3>end</h3>\n<p>Vue è¿™ç§æ’ä»¶æœºåˆ¶è¿˜æ˜¯æƒ³çš„æŒºå‘¨åˆ°çš„ã€‚å› ä¸º Vue æ’ä»¶å¿…ç„¶ä¼šç”¨åˆ° Vueï¼Œè€Œåˆé¿å…å¼•å…¥ Vue é€ æˆåŒ…ä½“ç§¯è¿‡å¤§ï¼Œæ‰€ä»¥æ‰ä½¿ç”¨å°† Vue æ„é€ å‡½æ•°ä¼ å…¥æ’ä»¶è¿™ç§æ–¹æ³•ï¼Œè€Œä¸”é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥è®©æ’ä»¶æœ‰æ›´é«˜çš„å¯æ‰©å±•æ€§ï¼Œä¾¿äºåœ¨æ’ä»¶å†…éƒ¨å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ã€‚</p>","frontmatter":{"title":"Vueæ’ä»¶æœºåˆ¶è§£æ","date":"October 20, 2019","description":"æ·±å…¥æºç è§£æVueçš„æ’ä»¶æœºåˆ¶","category":"Vue"}}},"pageContext":{"slug":"/content/Vue/vue-use/","previous":{"fields":{"slug":"/content/Vue/vue-mixin/"},"frontmatter":{"title":"Vueçš„mixinæœºåˆ¶åŠmergeOptionsè§£æ"}},"next":{"fields":{"slug":"/content/Flutter/flutter-route-manage/"},"frontmatter":{"title":"Flutterï¼šè·¯ç”±ç®¡ç†"}}}}}