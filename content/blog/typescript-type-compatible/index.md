---
title: TypeScriptç±»å‹å…¼å®¹æ€§
date: '2019-12-31'
description: æ€»ç»“TypeScriptçš„ç±»å‹å…¼å®¹æ€§
category: TypeScript
---

TS åœ¨å¢å¼º JS ç±»å‹çš„ç¨³å®šæ€§çš„åŒæ—¶ä¹Ÿä¸å¤±å¢åŠ ç±»å‹çš„çµæ´»æ€§ï¼ŒTS åœ¨ç±»å‹ä¸Šçš„çµæ´»æ€§æ˜¯é€šè¿‡ç±»å‹å…¼å®¹æ€§ä¸€ç‰¹æ€§å®ç°çš„ã€‚TS çš„ç±»å‹å…¼å®¹æ€§æ˜¯åŸºäºç»“æ„å­ç±»å‹çš„ï¼Œç»“æ„ç±»å‹æ˜¯ä¸€ç§åªæ˜¯ç”¨å…¶æˆå‘˜æ¥æè¿°ç±»å‹çš„æ–¹å¼ï¼Œæ­£å¥½ä¸åä¹‰ç±»å‹å½¢æˆå¯¹æ¯”(åœ¨åŸºäºåä¹‰ç±»å‹çš„ç±»å‹ç³»ç»Ÿæ±‡æ€»ï¼Œæ•°æ®ç±»å‹çš„å…¼å®¹æ€§æˆ–ç­‰ä»·æ€§æ˜¯é€šè¿‡æ˜ç¡®çš„å£°æ˜å’Œ/æˆ–ç±»å‹çš„åç§°æ¥å†³å®šçš„)ã€‚

çœ‹ä¸‹å®˜ç½‘çš„ ğŸŒ°ï¼š

```ts
interface Named {
  name: string
}
class Person {
  name: string
}
let p: Named
p = new Person()
```

åœ¨ä½¿ç”¨åä¹‰ç±»å‹ç³»ç»Ÿçš„è¯­è¨€ä¸­ï¼Œä¸Šé¢ä»£ç æ˜¯æŠ¥é”™çš„ï¼Œå› ä¸º Person ç±»æ²¡æœ‰æ˜ç¡®è¯´æ˜å…¶å®ç°äº† Named æ¥å£ã€‚

TS çš„ç»“æ„æ€§å­ç±»å‹æ›´äº² JS ä»£ç çš„ä¹¦å†™æ–¹å¼ï¼Œå› ä¸ºåœ¨ JS ä¸­å¹¿æ³›çš„ç”¨åˆ°äº†å‡½æ•°è¡¨è¾¾å¼å’Œå¯¹è±¡å­—é¢é‡ï¼Œæ‰€ä»¥ä½¿ç”¨ç»“æ„ç±»å‹ç³»ç»Ÿç±»æè¿°è¿™äº›ç±»å‹æ¯”ä½¿ç”¨åä¹‰ç±»å‹ç³»ç»Ÿæ›´å¥½ã€‚

### ç±»å‹çš„å…¼å®¹æ€§

å½“ä¸€ä¸ªç±»å‹ Y å¯ä»¥è¢«èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªç±»å‹ X æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´ç±»å‹ X å…¼å®¹ç±»å‹ Y

> å³ï¼šX å…¼å®¹ Y : X(ç›®æ ‡ç±»å‹) = Y(æºç±»å‹)

ä¾‹å¦‚ä¸‹é¢ ğŸŒ°ï¼š

```ts
let s: stirng = 'a'
s = null
```

ä¸Šé¢ä»£ç æˆ‘ä»¬å°±å¯ä»¥è¯´ string ç±»å‹æ˜¯å…¼å®¹ null ç±»å‹çš„ã€‚

#### æ¥å£å…¼å®¹æ€§

å½“ä¸€ä¸ªæ¥å£ Y å…·å¤‡å¦å¤–ä¸€äº›æ¥å£ X çš„æ‰€æœ‰å±æ€§ï¼Œé‚£ä¹ˆä¹…å¯ä»¥è®¤ä¸º X å…¼å®¹ Yï¼Œå³å°†ä¸€ä¸ª Y ç±»å‹çš„å€¼èµ‹å€¼ç»™ X ç±»å‹çš„å€¼ä¸ä¼šæŠ¥é”™

```ts
interface X {
  a: any
  b: any
}
interface Y {
  a: any
  b: any
  c: any
}
let x: X = { a: 1, b: 2 }

let y: Y = { a: 1, b: 2, c: 3 }
x = y
```

> note:å½“æ¥å£ X çš„å±æ€§é›†æ˜¯æ¥å£ Y çš„å±æ€§é›†çš„å­é›†ï¼Œé‚£ä¹ˆ X å…¼å®¹ Y

#### å‡½æ•°å…¼å®¹æ€§

æƒ³è¦ä¸¤ä¸ªå‡½æ•°ç±»å‹å…¼å®¹å¿…é¡»æ»¡è¶³ 3 ä¸ªæ¡ä»¶ï¼š

- å‚æ•°ä¸ªæ•°
- å‚æ•°ç±»å‹
- è¿”å›å€¼ç±»å‹

##### ï¼ˆ1ï¼‰å‚æ•°ä¸ªæ•°

ç›®æ ‡ç±»å‹çš„å‚æ•°ä¸ªæ•°ä¸€å®šè¦å¤šäºæºç±»å‹çš„å‚æ•°ä¸ªæ•°ã€‚

ä¾‹å¦‚ï¼š

```ts
let handler1 = (a: number) = {}
let handler2 = (a: number, b:number) = {}
```

ä¾‹å¦‚ä¸Šé¢ handler1 å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œhandler å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ handler2 æ˜¯å…¼å®¹ hander1 çš„ï¼Œhandler1 ä¸å…¼å®¹ handler2

```ts
handler2 = handler1 //âœ…
handler1 = handler2 //âŒ
```

å½“å‡½æ•°ä¸­å­˜åœ¨å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°æ—¶ï¼Œæœ‰ä»¥ä¸‹ç»“è®ºï¼š

> åœ¨å‚æ•°ä¸ªæ•°æ»¡è¶³çš„å‰æä¸‹ï¼Œå›ºå®šå‚æ•°ã€å¯é€‰å‚æ•°ã€å‰©ä½™å‚æ•°ä¸‰è€…æ˜¯ç›¸äº’å…¼å®¹çš„

ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå›ºå®šå‚æ•°å’Œå¯é€‰å‚æ•°åœ¨æ»¡è¶³å‚æ•°ä¸ªæ•°æ¡ä»¶ä¸‹å°±ä¸ç”¨å¤šè¯´ï¼Œå‰©ä½™å‚æ•°æ˜¯å¯ä»¥è¢«çœ‹åš`0 - Infinite`ä¸ªå¯é€‰å‚æ•°ï¼Œæ»¡è¶³å‚æ•°ä¸ªæ•°çš„æ¡ä»¶ï¼Œå› æ­¤ä¹Ÿæ˜¯å…¼å®¹çš„ã€‚

#### ï¼ˆ2ï¼‰å‚æ•°ç±»å‹

å¦‚æœæƒ³è¦ä¸¤ä¸ªå‡½æ•°ç±»å‹å…¼å®¹ï¼Œé‚£ä¹ˆå‚æ•°ç±»å‹å¿…é¡»è¦åŒ¹é…

å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•ç±»å‹çš„ ğŸŒ°ï¼š

```ts
let handler1 = (a: number) => {}
let handler2 = (a: string) => {}
```

ä¸Šé¢ä¸¤ä¸ªå‡½æ•° handler1 å’Œ handler2 ç”±äºå‚æ•°ç±»å‹ä¸åŒä¸å…¼å®¹ã€‚

```ts
handler1 = handler2 //âŒ
handler2 = handler1 //âŒ
```

å†æ¥çœ‹ä¸€ä¸ªå¤æ‚ç±»å‹çš„ ğŸŒ°ï¼Œå¦‚æœä¸¤ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼š

```ts
interface Point3D {
  x: number
  y: number
  z: number
}
interface Point2D {
  x: number
  y: number
}
let p3d = (point: Point3D) = {}
let p2d = (point: Point2D) = {}
p3d = p2d //âœ…
p2d = p3d //âŒ
```

ä¸Šé¢å®šä¹‰äº†ä¸¤ä¸ªå‡½æ•°ï¼Œå‚æ•°åˆ†åˆ«æ˜¯ä¸¤ä¸ªæ¥å£ç±»å‹çš„å¯¹è±¡ï¼Œæ­¤æ—¶ p3d æ˜¯å…¼å®¹ p2d çš„ï¼Œè€Œ p2d ä¸å…¼å®¹ p3dã€‚

ä¸æ¥å£å…¼å®¹æ€§æ­£å¥½ç›¸åï¼Œå‚æ•°æ˜¯å¤æ‚ç±»å‹çš„å‡½æ•°ï¼Œå¦‚æœ X å‡½æ•°å…¼å®¹ Y å‡½æ•°ï¼Œé‚£ä¹ˆ Y å‡½æ•°çš„å‚æ•°çš„å±æ€§é›†å¿…å®šæ˜¯ X å‡½æ•°çš„å‚æ•°çš„å±æ€§é›†çš„å­é›†ï¼ˆå•å‚ï¼‰ã€‚

#### ï¼ˆ3ï¼‰è¿”å›å€¼ç±»å‹

ç›®æ ‡å‡½æ•°çš„è¿”å›å€¼ç±»å‹å¿…é¡»äºæºå‡½æ•°è¿”å›å€¼ç±»å‹æˆ–è€…ä¸ºå…¶å­ç±»å‹ï¼ˆè¿™é‡Œçš„å­ç±»å‹è¡¨ç¤ºç»“æ„ä¸Šçš„å­é›†ï¼‰,ä¾‹å¦‚ä¸‹é¢ä¸¤ä¸ªå‡½æ•°

```ts
let a = () => ({ name: 'Wang' })
let b = () => ({ name: 'Wang', location: 'Beijing' })
```

æ­¤æ—¶ a å‡½æ•°æ˜¯å…¼å®¹ b å‡½æ•°çš„ï¼Œè€Œ b å‡½æ•°åˆ™ä¸å…¼å®¹ a å‡½æ•°

```ts
a = b //âœ…
b = a //âŒ
```

åªè¦æ»¡è¶³ä»¥ä¸Šä¸‰ç§è§„åˆ™ï¼Œé‚£ä¹ˆè®²ä¸ªå‡½æ•°ç±»å‹å°±æ˜¯ç›¸äº’å…¼å®¹ã€‚

é™¤æ­¤ä¹‹å¤–å‡½æ•°çš„é‡è½½ä¹Ÿæ˜¯å‡½æ•°ç±»å‹å…¼å®¹æ€§çš„ä¸€ç§ä½“ç°ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªå‡½æ•°é‡è½½ï¼š

```ts
function overload(a: number, b: number): number
function overload(a: string, b: string): string
function overload(a: any, b: any): any {
  console.log(a, b)
}
```

overload å‡½æ•°åˆ—è¡¨ä¸­çš„å‡½æ•°ä¸ºç›®æ ‡å‡½æ•°ï¼Œå…·ä½“å®ç°ä¸ºæºå‡½æ•°ï¼Œç¨‹åºåœ¨ç¼–è¯‘æ—¶ä¼šæŸ¥æ‰¾é‡è½½åˆ—è¡¨ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„å®šä¹‰æ¥æ‰§è¡Œä¸‹é¢çš„å‡½æ•°ï¼Œæ‰€ä»¥åœ¨é‡è½½åˆ—è¡¨ä¸­ç›®æ ‡å‡½æ•°çš„å‚æ•°è¦å¤šäºæºå‡½æ•°çš„å‚æ•°ï¼Œè€Œä¸”è¿”å›å€¼çš„ç±»å‹ä¹Ÿè¦ç¬¦åˆè¦æ±‚ã€‚

### æšä¸¾ç±»å‹çš„å…¼å®¹æ€§

æšä¸¾ç±»å‹çš„å…¼å®¹æ€§å¤„ç†å¯ä»¥åˆ†ä¸ºä¸¤ç‚¹ï¼š

1. æšä¸¾ç±»å‹å’Œæ•°å€¼ç±»å‹æ˜¯å¯ä»¥ç›¸äº’å…¼å®¹çš„
2. ä¸¤ä¸ªä¸åŒçš„æšä¸¾ç±»å‹ä¹‹é—´æ˜¯å®Œå…¨ä¸å…¼å®¹çš„

æšä¸¾ç±»å‹ä¸æ•°å€¼ç±»å‹

```ts
enum Fruit {
  Apple,
  Banana
}
let apple: Fruit = Fruit.Apple
let n = 123
apple = n //âœ…
n = apple //âœ…
```

æšä¸¾ç±»å‹ä¸æšä¸¾ç±»å‹

```ts
enum Fruit {
  Apple,
  Banana
}
enum Colors {
  Green,
  Red
}
let apple = Fruit.Apple
let red = Colors.Red

apple = red //âŒ
red = apple //âŒ
```

### ç±»çš„å…¼å®¹æ€§

ç±»ç±»å‹çš„å…¼å®¹æ€§åªæ¯”è¾ƒç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ¯”è¾ƒä¸¤ä¸ªç±»æ˜¯å¦å…¼å®¹çš„æ—¶å€™ï¼Œé™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°æ˜¯ä¸å‚ä¸æ¯”è¾ƒçš„ï¼Œåªæ¯”è¾ƒå®ä¾‹æˆå‘˜ã€‚å¦‚æœç±»ä¸­æœ‰ç§æœ‰æˆå‘˜ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å’Œå…¶ä»–ç±»æ˜¯ä¸å…¼å®¹çš„ï¼Œä½†å’Œå…¶å­ç±»å…¼å®¹ã€‚

**æ²¡æœ‰ç§æœ‰æˆå‘˜çš„æƒ…å†µ**

```ts
class A {
  constructor(a: number) {}
  id: number = 1
}
class B {
  constructor(a: number, b: number) {}
  id: number = 2
}
let a = A(1)
let b = B(1, 2)
a = b //âœ…
b = a //âœ…
```

**å­˜åœ¨ç§æœ‰æˆå‘˜çš„æƒ…å†µ**

```ts
class A {
  constructor(a: number) {}
  id: number = 1
  private name: string = 'wang'
}
class B {
  constructor(a: number, b: number) {}
  id: number = 2
}
class C extends A {}
let a = A(1)
let b = B(1, 2)
let c = C(1)
a = b //âŒ
b = a //âŒ
a = c //âœ…
c = a //âœ…
```

### æ³›å‹å…¼å®¹æ€§

æ³›å‹å…¼å®¹æ€§ä¸­ä¸»è¦åˆ†ä¸ºæ³›å‹æ¥å£çš„å…¼å®¹æ€§å’Œæ³›å‹å‡½æ•°çš„å…¼å®¹æ€§ã€‚

**æ³›å‹æ¥å£**

å®šä¹‰ä¸€ä¸ªæ³›å‹æ¥å£ï¼Œå½“æ¥å£ä¸­æ²¡æœ‰ä½¿ç”¨æ­¤æ³›å‹çš„æ—¶å€™ï¼Œç”±æ³›å‹æ¥å£å®šä¹‰çš„ä¸¤ä¸ªå¯¹è±¡æ˜¯å…¼å®¹çš„ï¼›å¦‚æœæœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸å…¼å®¹çš„ã€‚æ¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„ ğŸŒ°ã€‚

```ts
interface Empty<T> {
  value: string
  key: string
}
```

ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ª Empty æ³›å‹æ¥å£ï¼Œä½†æ˜¯æ¥å£å†…çš„å±æ€§å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°æ³›å‹ Tã€‚

```ts
let obj1: Empty<string> = { key: 'key', value: 'value' }
let obj2: Empty<number> = { key: 'key1', value: 'value1' }
//æ­¤æ—¶ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸äº’å…¼å®¹çš„
obj1 = obj2 //âœ…
obj2 = obj1 //âœ…
```

å¦‚æœæœ‰ä½¿ç”¨åˆ°æ³›å‹ Tï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ª ğŸŒ°ï¼š

```ts
interface Empty<T> {
  value: T
  key: T
}
```

ä¸Šé¢ Empty æ³›å‹æ¥å£ä¸­çš„å±æ€§éƒ½ç”¨åˆ°äº†æ³›å‹ Tã€‚

```ts
let obj1: Empty<string> = { key: 'key', value: 'value' }
let obj2: Empty<number> = { key: 1, value: 123 }
//æ­¤æ—¶ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸äº’å…¼å®¹çš„
obj1 = obj2 //âŒ
obj2 = obj1 //âŒ
```

**æ³›å‹å‡½æ•°**
å¦‚æœä¸¤ä¸ªæ³›å‹å‡½æ•°çš„å®šä¹‰ç›¸åŒï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ³›å‹å‡½æ•°æ˜¯ç›¸äº’å…¼å®¹çš„ï¼Œå¦åˆ™ä¸å…¼å®¹ã€‚

```ts
let a = <T>(x: T): T => {
  console.log('x')
  return x
}
let b = <T>(y: T): T => {
  console.log('y')
  return y
}
a = b //âœ…
b = a //âœ…
```
